<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>

    <script>
      $(document).ready(function(){ 
      
        var $body = $('body');
        $body.html('');

        // Create a button
        var $moreTweets = $('<button></button>');
        $moreTweets.text('Refresh Feed');
        $moreTweets.addClass('button-main');
        $moreTweets.appendTo($body);
        $('.button-main').css({'margin-left':'42.5%','width':'15%'});
        
        // Create section for tweets
        var $tweets = $('<div></div>');
        $tweets.addClass('tweetsFeed');
        $tweets.appendTo($body);
        $tweets.css({'border':'2px solid black'});



        var end = 0;
        // Create a function that is called on button click
        $('.button-main').on('click', function() {
        if (streams.home.length > end) {
          var today = new Date();
          var index = streams.home.length - 1;
          while(index >= end){ 
            var tweet = streams.home[index];
            var userName = tweet.user;

            var $user = $('<button>@'+userName+'</button>');
            $user.addClass(userName);

            var $tweet = $('<p></p>');
            $tweet.addClass(userName);
            $(userName).before($user);
            $tweet.text(tweet.message + today); //added "today" to get current time
            $tweet.prependTo($tweets);
            $user.prependTo($tweets);
            $tweet.css({'border-bottom':'1px solid gray'});
            index -= 1;
          }
          end = streams.home.length;
          } else {alert('No new tweets yet!');}
        });

        $('.tweetsFeed').on('click','button', function() {
          if(this.className === 'mracus') { 
            $('p').toggle();
            $('button').toggle();
            $(this).show();
            $('.mracus').show();
          } else if (this.className === 'douglascalhoun') {
            $('p').toggle();
            $('button').toggle();
            $(this).show();
            $('.douglascalhoun').show();
          } else if (this.className === 'shawndrost') {
            $('p').toggle();
            $('button').toggle();
            $(this).show();
            $('.shawndrost').show();
          } else if (this.className === 'sharksforcheap') {
            $('p').toggle();
            $('button').toggle();
            $(this).show();
            $('.sharksforcheap').show();
          } else {
            alert('User not found.');
          }
        });

      });

    </script>

  </body>
</html>

